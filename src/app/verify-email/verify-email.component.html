<div class="body">
  <form class="form" [formGroup]="otpForm" (ngSubmit)="onSubmit()">
    <div class="title">OTP</div>
    <div class="title">Verification Code</div>
    <p class="message">We sent a code to <strong>{{ email }}</strong></p>

    <div class="inputs">
      <input
        #box0
        formControlName="code0"
        type="text"
        maxlength="1"
        (input)="autoFocus(box0, box1)"
      />
      <input
        #box1
        formControlName="code1"
        type="text"
        maxlength="1"
        (input)="autoFocus(box1, box2)"
      />
      <input
        #box2
        formControlName="code2"
        type="text"
        maxlength="1"
        (input)="autoFocus(box2, box3)"
      />
      <input
        #box3
        formControlName="code3"
        type="text"
        maxlength="1"
        (input)="autoFocus(box3, box4)"
      />
      <input
        #box4
        formControlName="code4"
        type="text"
        maxlength="1"
        (input)="autoFocus(box4, box5)"
      />
      <input
        #box5
        formControlName="code5"
        type="text"
        maxlength="1"
        (input)="autoFocus(box5, null)"
      />
    </div>

    <div *ngIf="apiError" class="error-message">{{ apiError }}</div>

    <button type="submit" class="action" [disabled]="loading">
      {{ loading ? 'Verifying…' : 'Verify Email' }}
    </button>
    <button
      type="button"
      class="resend-btn"
      (click)="onResend()"
      [disabled]="resendLoading"
    >
      {{ resendLoading ? 'Resending…' : 'Resend OTP' }}
    </button>
    <div *ngIf="resendMessage" class="resend-message">{{ resendMessage }}</div>
  </form>
</div>
